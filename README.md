# 📦 基于强化学习的智能汽车物流调度模拟器 (Car Logistics RL Environment)

## 🌟 项目简介

这是一个基于 **Gymnasium** 构建的强化学习环境，模拟了复杂的汽车生产、库存、调度和分销网络。智能体（Agent）的目标是在每周的生产、需求和库存变化下，制定最优的汽车调度策略，从而**最大化利润，即最小化总运输成本和未满足客户需求所产生的巨额惩罚。**

本项目不仅是研究生课程设计的一部分，更深入地探索了**强化学习在供应链和运筹优化领域的实际应用潜力**，展示了如何通过AI技术解决复杂的动态决策问题。

## ✨ 主要功能与特点

*   **多源多目的地调度:** 模拟汽车从工厂和多个临时仓库向不同类型客户（大客户、4S店、经销商）的配送。
*   **动态生产与需求:** 每周随机生成工厂产量和客户需求，贴近实际业务的随机性。
*   **分级客户需求:** 针对不同客户类型（大客户、4S店、经销商）设计了不同车型和数量的需求模式。
*   **灵活的动作空间:** 智能体可以为每个客户订单选择最优发货来源（工厂或指定仓库），并决策工厂过剩产能的入库仓库。
*   **惩罚与成本机制:** 考虑了不同车型的单位运输成本、距离成本，以及对未满足需求的巨额惩罚，引导智能体寻求最优解。
*   **回退调度策略:** 内置了在主调度源不足时，自动从其他可用来源进行补足的逻辑，模拟真实世界中的应急响应。
*   **详细日志与报告:** 自动生成每周调度详情、客户需求概览和地点距离等Excel报告，便于分析和审计智能体行为。
*   **兼容主流RL框架:** 环境遵循Gymnasium API规范，可无缝对接Stable-Baselines3, Ray RLib等主流强化学习库。

## 🚀 技术栈

*   **核心语言:** Python 3.9+
*   **强化学习框架:** `Gymnasium` (环境构建), `Stable-Baselines3` (PPO算法)
*   **数据处理:** `NumPy`, `Pandas`
*   **科学计算:** `NumPy`
*   **报告生成:** `openpyxl` (用于Excel导出)

## 💡 解决的核心问题

在复杂的汽车供应链中，如何高效地分配有限的生产资源和库存，以满足不同优先级和地域客户的需求，同时最小化物流成本并避免缺货，是一个典型的**动态、多目标、大规模优化问题**。本项目尝试通过强化学习智能体来学习最优的调度策略，以应对这种不确定性和复杂性。

## 🛠️ 如何运行

1.  **克隆仓库:**
    ```bash
    git clone https://github.com/YourUsername/YourRepoName.git  # 替换为你的实际仓库链接
    cd YourRepoName
    ```
2.  **创建并激活虚拟环境 (推荐):**
    ```bash
    python -m venv venv
    # Windows
    .\venv\Scripts\activate
    # macOS/Linux
    source venv/bin/activate
    ```
3.  **安装依赖:**
    ```bash
    pip install -r requirements.txt
    ```
    (`requirements.txt`内容示例: `numpy`, `gymnasium`, `stable-baselines3[extra]`, `pandas`, `openpyxl`)
4.  **运行训练与评估:**
    ```bash
    python car_logistics_env.py
    ```
    脚本将自动进行模型训练（如果不存在预训练模型），并在训练完成后进行评估，生成Excel报告。

## 📊 评估报告示例
![调度日志示例](https://github.com/user-attachments/assets/92ebc7f7-b510-4bf5-a1b4-5e183e78b1d7)

## 📈 项目亮点与挑战

*   **挑战:**
    *   **大规模离散动作空间:** 如何在包含近30个决策点的`MultiDiscrete`动作空间中，有效地探索和学习最优策略。
    *   **稀疏且延迟的奖励信号:** 只有在周结束时才能收到总成本和未满足需求的奖励，且未满足惩罚巨大，导致奖励信号稀疏且梯度难以回传。
    *   **动态环境建模:** 确保生产和需求生成逻辑的随机性和真实性，同时保持环境的稳定性。
    *   **复杂的回退逻辑:** 设计和实现了多层级的库存调度回退机制，确保在首选来源不足时能从其他地方补货。
*   **亮点:**
    *   **模块化的Gymnasium环境设计:** 清晰地分离了环境逻辑、状态观测和动作空间定义，易于扩展和维护。
    *   **可解释的决策过程:** 通过详细的调度日志（Excel报告）可以追溯智能体在每一步的决策和其导致的结果。
    *   **灵活的配置参数:** 大量常数可调，便于快速迭代和实验不同场景。
    *   **高效的训练与评估流程:** 集成了Stable-Baselines3的`Monitor`和`VecNormalize`，加速训练并提供全面性能指标。

## 🤝 贡献与未来展望

本项目是一个起点，欢迎提出Issues或Pull Requests。未来的改进方向包括：

*   引入更多库存管理策略，如安全库存、提前期等。
*   考虑车辆运输容量限制和路线优化。
*   加入多工厂协调、生产计划调整等更复杂的决策。
*   探索更先进的RL算法，如SAC、TD3等，以应对连续或更复杂的动作空间。

## 📧 联系我

如果您对本项目有任何疑问、建议或合作意向，欢迎通过以下方式联系我：

*   **邮箱:** wangstiffler@gmail.com
*   **QQ:** 382823537

---

**许可证:** 本项目采用 MIT 许可证。详见 `LICENSE` 文件。
